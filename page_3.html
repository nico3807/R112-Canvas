<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TP Canvas - 3. Effet d'√âcho (Boucle)</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>3. üîä Effet d'√âcho (Boucle et Couleur)</h1>
        <p>
          Nous allons cr√©er l'effet d'√©cho visuel en utilisant une boucle `for`
          pour dessiner plusieurs cercles concentriques avec une opacit√©
          d√©gressive.
        </p>
      </header>

      <hr />

      <section id="echo-function-loop">
        <h2>Fonction `dessinerEcho` et Boucle</h2>
        <p>
          Cr√©ez une fonction `dessinerEcho(x, y, maxRayon, nbCercles)` et
          initialisez une boucle `for` qui tournera `nbCercles` fois[cite: 321,
          322].
        </p>
        <div class="code-step">
          <p>Squelette de la fonction `dessinerEcho` :</p>
          <pre>
<code>function dessinerEcho(x, y, maxRayon, nbCercles) { // [cite: 323]
  
  // Calculer l'√©cart de rayon entre chaque cercle
  let ecart = maxRayon / nbCercles; // [cite: 324]
  
  // Boucle pour dessiner chaque cercle
  for (let i = 0; i < nbCercles; i++) { // [cite: 325]
    // ... Logique de calcul du rayon et de l'opacit√© ici
  }
}</code></pre>
        </div>
      </section>

      <hr />

      <section id="radius-opacity-calc">
        <h2>Calcul du Rayon et de l'Opacit√©</h2>
        <p>
          √Ä chaque tour de boucle (`i`), nous devons calculer le rayon actuel et
          ajuster l'opacit√© (`globalAlpha`) pour cr√©er l'effet d'estompage
          [cite: 330, 333].
        </p>
        <ul>
          <li>Le **rayon actuel** diminue √† chaque it√©ration[cite: 332].</li>
          <li>
            L'**opacit√©** augmente de 0 (transparent) √† 1 (opaque)[cite: 333,
            334].
          </li>
        </ul>
        <div class="code-step">
          <p>
            Code complet de la boucle `for` (√† l'int√©rieur de `dessinerEcho`) :
          </p>
          <pre>
<code>for (let i = 0; i < nbCercles; i++) {
  // Calcul du rayon (d√©croissant)
  let rayonActuel = maxRayon - (i * ecart); // [cite: 332]
  
  // Opacit√© progressive (croissante de 0.0 √† 1.0)
  ctx.globalAlpha = 0 + i / nbCercles; // [cite: 334]
  
  // Appel de la fonction de dessin du cercle
  dessinerCercle(x, y, rayonActuel, '#00CCFF'); // [cite: 335]
}

// Important : R√©initialiser l'opacit√© globale √† 1 apr√®s la boucle (sinon tout le reste est transparent)
ctx.globalAlpha = 1; // [cite: 338, 339]</code></pre>
        </div>
      </section>

      <hr />

      <section id="test-echo">
        <h2>Test de l'√âcho</h2>
        <p>Appelez la nouvelle fonction pour v√©rifier l'effet[cite: 336].</p>
        <div class="code-step">
          <p>Appel de la fonction dans `script.js` (apr√®s sa d√©finition) :</p>
          <pre>
<code>dessinerEcho(250, 250, 200, 8); // Centre (250, 250), Rayon max 200, 8 cercles. // [cite: 337]</code></pre>
        </div>
      </section>

      <hr />

      <div class="menu-buttons">
        <div class="back-to-menu">
          <a href="page_2.html">‚Üê Partie pr√©c√©dente (Dessin Cercle)</a>
        </div>
        <div class="back-to-menu">
          <a href="page_4.html"
            >‚Üí Partie suivante (Interactivit√© et Animation)</a
          >
        </div>
      </div>

      <footer>
        <p style="text-align: center; font-size: 0.9em; color: #666">
          ¬© 2025 ‚Äî BUT MMI B√©ziers - MAURIN N.<br />
          R1.12 D√©veloppement Web
        </p>
      </footer>
    </div>
  </body>
</html>
